<!DOCTYPE html>
<head>
	<style>
	#title{
		text-align: center;
		margin-top: 20px;
		font-family: Montserrat, Helvetica, Arial, sans-serif;
		font-weight: 500;
	}
	</style>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="https://cdn.plot.ly/plotly-2.3.0.min.js"></script>
	<script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
	<script>
		var ET01Label = "France";
		var ET02Label = "India";
		var ET03Label = "USA";
		var ET01Color = "#BD2C2F";
		var ET02Color = "#F29D4B";
		var ET03Color = "#3B3C6B";
		var PtSize = 7;
		var PtOpacity = 0.8


		function filterRows(rows, type){
			x=rows.filter(function(d){ return d.Country == type })
			return x;

		}

		function ET01Plot(){
			document.getElementById('plot').innerHTML = "";
			d3.csv('https://raw.githubusercontent.com/lcenvs/3D-Graphing-With-Plotly-EcoTypes2022-FRINUS/main/ETAll.csv', function(err, rows){
				function unpack(rows, key, filter){
					f=filterRows(rows,filter)
					return f.map(function(f){return f[key];});
				}
				ET01Trace = {
					name: ET01Label,
					x:unpack(rows, 'Place (x)', ET01Label),
					y:unpack(rows, 'Knowledge (y)', ET01Label),
					z:unpack(rows, 'Action (z)', ET01Label),
					mode: 'markers',
					marker: {
						size: PtSize,
						opacity: PtOpacity,
						color: ET01Color
					},
					type: 'scatter3d'

				};
				var data = [ET01Trace];
				var layout = {
					showlegend: true,
				  legend: {
				    x: 1,
				    y: 0.5
				  },
					scene: {
						xaxis:{
							title: 'Place (x)',
							range: [-1, 1]
						},
						yaxis:{
							title: 'Knowledge (y)',
							range: [-1, 1]
						},
						zaxis:{
							title: 'Action (z)',
							range: [-1, 1]
						},
						},
					margin: {
					l: 0,
					r: 0,
					b: 0,
					t: 0
				}};
				Plotly.newPlot('plot', data, layout);
			});
			return true;
		}

		function ET02Plot(){
			document.getElementById('plot').innerHTML = "";
			d3.csv('https://raw.githubusercontent.com/lcenvs/3D-Graphing-With-Plotly-EcoTypes2022-FRINUS/main/ETAll.csv', function(err, rows){
				function unpack(rows, key, filter){
					f=filterRows(rows,filter)
					return f.map(function(f){return f[key];});
				}
				ET02Trace = {
					name: ET02Label,
					x:unpack(rows, 'Place (x)', ET02Label),
					y:unpack(rows, 'Knowledge (y)', ET02Label),
					z:unpack(rows, 'Action (z)', ET02Label),
					mode: 'markers',
					marker: {
						size: PtSize,
						opacity: PtOpacity,
						color: ET02Color
					},
					type: 'scatter3d'

				};
				var data = [ET02Trace];
				var layout = {
					showlegend: true,
				  legend: {
				    x: 1,
				    y: 0.5
				  },
					scene: {
						xaxis:{
							title: 'Place (x)',
							range: [-1, 1]
						},
						yaxis:{
							title: 'Knowledge (y)',
							range: [-1, 1]
						},
						zaxis:{
							title: 'Action (z)',
							range: [-1, 1]
						},
						},
					margin: {
					l: 0,
					r: 0,
					b: 0,
					t: 0
				}};
				Plotly.newPlot('plot', data, layout);
			});
			return true;
		}

		function ET03Plot(){
			document.getElementById('plot').innerHTML = "";
			d3.csv('https://raw.githubusercontent.com/lcenvs/3D-Graphing-With-Plotly-EcoTypes2022-FRINUS/main/ETAll.csv', function(err, rows){
				function unpack(rows, key, filter){
					f=filterRows(rows,filter)
					return f.map(function(f){return f[key];});
				}
				ET03Trace = {
					name: ET03Label,
					x:unpack(rows, 'Place (x)', ET03Label),
					y:unpack(rows, 'Knowledge (y)', ET03Label),
					z:unpack(rows, 'Action (z)', ET03Label),
					mode: 'markers',
					marker: {
						size: PtSize,
						opacity: PtOpacity,
						color: ET03Color
					},
					type: 'scatter3d'

				};
				var data = [ET03Trace];
				var layout = {
					showlegend: true,
				  legend: {
				    x: 1,
				    y: 0.5
				  },
					scene: {
						xaxis:{
							title: 'Place (x)',
							range: [-1, 1]
						},
						yaxis:{
							title: 'Knowledge (y)',
							range: [-1, 1]
						},
						zaxis:{
							title: 'Action (z)',
							range: [-1, 1]
						},
						},
					margin: {
					l: 0,
					r: 0,
					b: 0,
					t: 0
				}};
				Plotly.newPlot('plot', data, layout);
			});
			return true;
		}

		function showPlotAll(){
			document.getElementById('plot').innerHTML = "";
d3.csv('https://raw.githubusercontent.com/lcenvs/3D-Graphing-With-Plotly-EcoTypes2022-FRINUS/main/ETAll.csv', function(err, rows2){
					function unpack2(rows2, key, filter){
						f=filterRows(rows2,filter)
						return f.map(function(f){return f[key];});
					}
					ET01Trace2 = {
						name: ET01Label,
						x:unpack2(rows2, 'Place (x)', ET01Label),
						y:unpack2(rows2, 'Knowledge (y)', ET01Label),
						z:unpack2(rows2, 'Action (z)', ET01Label),
						mode: 'markers',
						marker: {
							size: PtSize,
							opacity: PtOpacity,
						},
						type: 'scatter3d'
					};
					ET02Trace2 = {
						name: ET02Label,
						x:unpack2(rows2, 'Place (x)', ET02Label),
						y:unpack2(rows2, 'Knowledge (y)', ET02Label),
						z:unpack2(rows2, 'Action (z)', ET02Label),
						mode: 'markers',
						marker: {
							size: PtSize,
							opacity: PtOpacity,
						},
						type: 'scatter3d'
					};
					ET03Trace2 = {
						name: ET03Label,
						x:unpack2(rows2, 'Place (x)', ET03Label),
						y:unpack2(rows2, 'Knowledge (y)', ET03Label),
						z:unpack2(rows2, 'Action (z)', ET03Label),
						mode: 'markers',
						marker: {
							size: PtSize,
							opacity: PtOpacity,
						},
						type: 'scatter3d'
					};

					var data2 = [ET01Trace2, ET02Trace2, ET03Trace2];
					var layout = {


						showlegend: true,
						legend: {
							x: 1,
							y: 0.5
						},
						colorway: [ET01Color, ET02Color, ET03Color],

						scene: {
							xaxis:{
								title: 'Place (x)',
								range: [-1, 1]
							},
							yaxis:{
								title: 'Knowledge (y)',
								range: [-1, 1]
							},
							zaxis:{
								title: 'Action (z)',
								range: [-1, 1]
							},
							},
						margin: {
						l: 0,
						r: 0,
						b: 0,
						t: 0

					}};
					Plotly.newPlot('plot', data2, layout);
			});
			return true;
		}
	</script>

</head>

<body>
	<div class="buttons">
		<button type="button" id="France" onclick="ET01Plot()">France</button>
		<button type="button" id="India" onclick="ET02Plot()">India</button>
		<button type="button" id="USA" onclick="ET03Plot()">USA</button>
		<button type="button" id="All Countries (Fall 2022; n = 582)" onclick="showPlotAll()">Show All Countries</button>
	</div>
	<h3 id="title">All Countries (Fall 2022; n = 582)</h3>
	<div id='plot' >

	</div>
</body>

<script>

$( document ).ready(function() {
	showPlotAll()

	$("button").click(function(){
		t=$(this).attr("id");
		console.log(t);
		$("#title").text(t);




	});

});

</script>


</html>
